-- MySQL Script generated by MySQL Workbench
-- Wed Jan 16 22:12:41 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema java_chat_server
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `java_chat_server` ;

-- -----------------------------------------------------
-- Schema java_chat_server
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `java_chat_server` DEFAULT CHARACTER SET utf8 ;
USE `java_chat_server` ;

-- -----------------------------------------------------
-- Table `java_chat_server`.`benutzer`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `java_chat_server`.`benutzer` ;

CREATE TABLE IF NOT EXISTS `java_chat_server`.`benutzer` (
  `idLogin` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `status` VARCHAR(45) NOT NULL,
  `lastonline` DATETIME NULL,
  PRIMARY KEY (`idLogin`),
  UNIQUE INDEX `username_UNIQUE` (`username` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `java_chat_server`.`raum`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `java_chat_server`.`raum` ;

CREATE TABLE IF NOT EXISTS `java_chat_server`.`raum` (
  `idRaum` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `typ` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idRaum`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `java_chat_server`.`message`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `java_chat_server`.`message` ;

CREATE TABLE IF NOT EXISTS `java_chat_server`.`message` (
  `idMsg` INT NOT NULL AUTO_INCREMENT,
  `nachricht` VARCHAR(255) NOT NULL,
  `datum` DATETIME NOT NULL,
  `benutzer_idLogin` INT NOT NULL,
  `raum_idRaum` INT NOT NULL,
  PRIMARY KEY (`idMsg`, `benutzer_idLogin`, `raum_idRaum`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `java_chat_server`.`benutzer_in_raum`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `java_chat_server`.`benutzer_in_raum` ;

CREATE TABLE IF NOT EXISTS `java_chat_server`.`benutzer_in_raum` (
  `benutzer_idLogin` INT NOT NULL,
  `raum_idRaum` INT NOT NULL,
  PRIMARY KEY (`benutzer_idLogin`, `raum_idRaum`))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `java_chat_server`.`benutzer`
-- -----------------------------------------------------
START TRANSACTION;
USE `java_chat_server`;
INSERT INTO `java_chat_server`.`benutzer` (`idLogin`, `username`, `password`, `status`, `lastonline`) VALUES (1, 'hans', '1234', 'online', NULL);
INSERT INTO `java_chat_server`.`benutzer` (`idLogin`, `username`, `password`, `status`, `lastonline`) VALUES (2, 'adolf', '1234', 'abwesend', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `java_chat_server`.`raum`
-- -----------------------------------------------------
START TRANSACTION;
USE `java_chat_server`;
INSERT INTO `java_chat_server`.`raum` (`idRaum`, `name`, `typ`) VALUES (1, 'boese sachen', 'privat');
INSERT INTO `java_chat_server`.`raum` (`idRaum`, `name`, `typ`) VALUES (2, 'home', 'privat');
INSERT INTO `java_chat_server`.`raum` (`idRaum`, `name`, `typ`) VALUES (3, 'test', 'Ã¶ffentlich');
INSERT INTO `java_chat_server`.`raum` (`idRaum`, `name`, `typ`) VALUES (4, 'nix', 'privat');

COMMIT;


-- -----------------------------------------------------
-- Data for table `java_chat_server`.`message`
-- -----------------------------------------------------
START TRANSACTION;
USE `java_chat_server`;
INSERT INTO `java_chat_server`.`message` (`idMsg`, `nachricht`, `datum`, `benutzer_idLogin`, `raum_idRaum`) VALUES (1, 'Hello hai ich bin Adolf', '2019-01-16 12:54:30', 1, 1);
INSERT INTO `java_chat_server`.`message` (`idMsg`, `nachricht`, `datum`, `benutzer_idLogin`, `raum_idRaum`) VALUES (2, 'huuhuhuh adholf', '2019-01-16 13:00:34', 2, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `java_chat_server`.`benutzer_in_raum`
-- -----------------------------------------------------
START TRANSACTION;
USE `java_chat_server`;
INSERT INTO `java_chat_server`.`benutzer_in_raum` (`benutzer_idLogin`, `raum_idRaum`) VALUES (1, 1);
INSERT INTO `java_chat_server`.`benutzer_in_raum` (`benutzer_idLogin`, `raum_idRaum`) VALUES (1, 2);
INSERT INTO `java_chat_server`.`benutzer_in_raum` (`benutzer_idLogin`, `raum_idRaum`) VALUES (1, 3);
INSERT INTO `java_chat_server`.`benutzer_in_raum` (`benutzer_idLogin`, `raum_idRaum`) VALUES (2, 1);
INSERT INTO `java_chat_server`.`benutzer_in_raum` (`benutzer_idLogin`, `raum_idRaum`) VALUES (2, 4);

COMMIT;

